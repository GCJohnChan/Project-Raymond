<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>API Request Test</title>
	</head>
	<body>
		<!-- All Activities -->
		<!-- Get -->
		<button type="button"
			onclick="getActivities()">
				Get All Activities
		</button>
		</br>
		<!-- Post -->
		<button type="button"
			onclick="postActivity(null, document.getElementById('activitiesJSON').value)">
				Post All Activities
		</button>
		<input id="activitiesJSON" placeholder="activites json">
		</br>
		</br>

		<!-- Single Activity -->
		<!-- Get -->
		<button type="button"
			onclick="getActivity(document.getElementById('activityGetID').value)">
				Get Activity
		</button>
		<input id="activityGetID" placeholder="activity id">
		</br>
		<!-- Post -->
		<button type="button"
			onclick="postActivity(document.getElementById('activitiesPostID').value,
			document.getElementById('activitiesJSON').value)">
				Post Activity
		</button>
		<input id="activityPostID" placeholder="activity id">
		<input id="activityJSON" placeholder="activity json">
		</br>
		</br>

		<!-- All Memberships -->
		<!-- Get -->
		<button type="button"
			onclick="getMemberships()">
				Get All Memberships
		</button>
		</br>
		<!-- Post -->
		<button type="button"
			onclick="postMembership(document.getElementByID('membershipsJSON').value)">
				Post All Memberships
		</button>
		<input id="membershipsJSON" placeholder="memberships json">
		</br>
		</br>

		<!-- Single Membership -->
		<!-- Get -->
		<button type="button"
			onclick="getMembership(document.getElementByID('membershipGetID').value)">
				Get Membership
		</button>
		<input id="membershipGetID" placeholder="membership id">
		</br>
		<!-- Post -->
		<button type="button"
			onclick="postMembership(document.getElementByID('membershipPostID').value,
			document.getElementByID('membershipJSON').value)">
				Post Membership
		</button>
		<input id="membershipPostID" placeholder="membership id">
		<input id="membershipJSON" placeholder="membership json">

		</br>
		</br>
		<!-- Test Get Request -->
		<button type="button" onclick="sendGetRequest($testUrl)">Test Get</button>
		<button type="button" onclick="sendGetRequest($apiUrl)">Test2 Get</button>
		<p id="p1"></p>
		<input id="demo">
	</body>

	<script>
		$testUrl = "http://ipinfo.io/json";
		$test2Url = "http://ccttrain.gordon.edu";
		// Base API Url
		$apiUrl = "http://ccttrain.gordon.edu/api";
		// Acitivity Url
		$activityUrl = $apiUrl + "/activities";
		// Membershup Url
		$membershipUrl = $apiUrl + "/memberships";

		// Get All Activities
		var getActivities = function() {
			sendGetRequest($activityUrl);
		}

		// Get All Memberships
		var getMemberships = function() {
			sendGetRequest($membershipUrl);
		}

		// Get Single Acitivty
		var getActivity = function(activityID) {
			alert ($activityUrl + "/" + activityID);
			sendGetRequest($activityUrl + "/" + activityID);
		}

		// Get Single Membership
		var getMembership = function(membershipID) {
			sendGetRequest($membershipUrl + "/" + membershipID);
		}

		// Post Single Activity
		var postActivity = function(activityID, data) {
			sendPostRequest($activityUrl + "/" + activityID, data);
		}

		// Post Aingle Membership
		var postMembership = function(membershipID, data) {
			sendPostRequest($membershipUrl + "/" + membershipID, data);
		}

		// Get Request
		// Returns JSON response
		var sendGetRequest = function(url) {
			var xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function() {
				if (xhr.readyState == 4 && xhr.status == 200)
				    var response = JSON.parse(xhr.responseText);
					document.getElementById("p1").innerHTML = xhr.responseText;
					return response;
			}
			xhr.open("GET", url, true);
			xhr.send();
		}

		// Post Request
		var sendPostRequest = function(url, data) {
			var xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function() {
				if (xhr.readyState == 4 && xhr.status == 200)
					document.getElementById("p1").innerHTML = xhr.responseText;
			}
			xhr.open("POST", url, true);
			xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
			xhr.send(data);
		}
	</script>
</html>
